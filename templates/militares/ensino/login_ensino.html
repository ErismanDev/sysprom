{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Modulo de Ensino</title>
    
    {% if not is_apk and not request.GET.apk %}
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    {% endif %}

    {% if is_apk or request.GET.apk %}
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap-icons.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/all.min.css' %}" rel="stylesheet">
    {% endif %}
    
    <style>
        :root { --primary-color: #ff6b35; --secondary-color: #d62828; --accent-color: #f77f00; --dark-color: #1a1a1a; --dark-gray: #2d2d2d; --light-orange: #ff8c42; --gold: #ffd700; --red-accent: #d32f2f; --yellow-accent: #ffeb3b; --light-blue: #87CEEB; }
        body { background: linear-gradient(135deg, var(--dark-color) 0%, var(--secondary-color) 30%, var(--primary-color) 70%, var(--accent-color) 100%); min-height: 100vh; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; position: relative; overflow: hidden; margin: 0; padding: 0; }
        body::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 20% 80%, rgba(255, 107, 53, 0.2) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(255, 140, 66, 0.15) 0%, transparent 50%), radial-gradient(circle at 40% 40%, rgba(255, 167, 38, 0.1) 0%, transparent 50%); animation: backgroundShift 25s ease-in-out infinite; }
        body::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(45deg, rgba(255, 107, 53, 0.08) 25%, transparent 25%), linear-gradient(-45deg, rgba(255, 140, 66, 0.06) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(255, 167, 38, 0.04) 75%), linear-gradient(-45deg, transparent 75%, rgba(255, 193, 7, 0.04) 75%); background-size: 100px 100px; background-position: 0 0, 0 50px, 50px -50px, -50px 0px; animation: firePattern 80s linear infinite; }
        @keyframes backgroundShift { 0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); } 25% { transform: translateX(-20px) translateY(-10px) rotate(1deg); } 50% { transform: translateX(20px) translateY(10px) rotate(-1deg); } 75% { transform: translateX(-10px) translateY(20px) rotate(0.5deg); } }
        @keyframes firePattern { 0% { transform: translateX(0) translateY(0); } 100% { transform: translateX(100px) translateY(100px); } }
        .login-container { display: flex; min-height: 100vh; align-items: center; justify-content: center; padding: 2rem; position: relative; z-index: 10; }
        .login-sidebar { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 2rem; text-align: center; color: white; }
        .login-form-section { flex: 1; display: flex; align-items: center; justify-content: center; padding: 2rem; }
        .login-header { background: none; color: white; padding: 0; text-align: center; position: relative; overflow: hidden; border: none; border-radius: 0; max-width: none; width: 100%; margin: 0; box-shadow: none; }
        .login-header h1 { margin: 0 0 1rem 0; font-size: clamp(1.2rem, 5vw, 2rem); font-weight: 700; position: relative; z-index: 2; text-shadow: 0 4px 8px rgba(0,0,0,0.5); }
        .login-header p { margin: 0.3rem 0 0 0; opacity: 0.9; font-size: 0.9rem; position: relative; z-index: 2; text-shadow: 0 1px 2px rgba(0,0,0,0.3); }
        .login-body { padding: 1rem; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 15px; max-width: 384px; width: 100%; margin: 0 auto; box-shadow: 0 8px 32px rgba(0,0,0,0.1); border: 1px solid rgba(255, 255, 255, 0.2); }
        .form-control, .form-select { border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.3); padding: .375rem .5rem; font-size: .9rem; min-height: 36px; transition: all 0.3s ease; background-color: rgba(255, 255, 255, 0.9); color: #333333; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .form-control:focus, .form-select:focus { border-color: var(--primary-color); box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25), 0 4px 12px rgba(255, 107, 53, 0.15); background-color: rgba(255, 255, 255, 0.95); color: #333333; }
        .btn-login { background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); border: none; border-radius: 12px; padding: .5rem 1rem; font-size: .95rem; font-weight: 700; color: white; transition: all 0.3s ease; width: 100%; }
        .btn-login:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3); }
        .form-label { color: rgba(255,255,255,0.85); font-weight: 500; text-shadow: none; }
        .logos-container { display: flex; align-items: center; justify-content: space-between; gap: 1rem; margin: 0 auto 2rem; flex-wrap: nowrap; width: 100%; max-width: 600px; }
        .cbmepi-logo { width: 200px; height: 200px; background: rgba(255, 255, 255, 0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 12px 40px rgba(0,0,0,0.3); overflow: hidden; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .sysgabom-logo { width: 200px; height: 200px; background: rgba(255, 255, 255, 0.9); border-radius: 25px; display: flex; align-items: center; justify-content: center; box-shadow: 0 12px 40px rgba(0,0,0,0.3); overflow: hidden; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .cbmepi-logo img { width: 95%; height: 95%; object-fit: contain; border-radius: 50%; }
        .sysgabom-logo img { width: 95%; height: 95%; object-fit: contain; border-radius: 12px; }
        .floating-elements { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .floating-circle { position: absolute; border-radius: 50%; background: linear-gradient(45deg, rgba(255, 107, 53, 0.2), rgba(255, 140, 66, 0.15)); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 2px solid var(--accent-color); box-shadow: 0 0 20px rgba(255, 107, 53, 0.3); }
        .circle-1 { width: 80px; height: 80px; top: 20%; left: 10%; animation: float1 15s ease-in-out infinite; }
        .circle-2 { width: 120px; height: 120px; top: 60%; right: 15%; animation: float2 20s ease-in-out infinite; }
        .circle-3 { width: 60px; height: 60px; bottom: 20%; left: 20%; animation: float3 12s ease-in-out infinite; }
        .floating-square { position: absolute; background: linear-gradient(45deg, rgba(255, 107, 53, 0.15), rgba(255, 140, 66, 0.1)); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border: 2px solid var(--accent-color); transform: rotate(45deg); box-shadow: 0 0 15px rgba(255, 107, 53, 0.2); }
        .square-1 { width: 40px; height: 40px; top: 30%; right: 30%; animation: float4 18s ease-in-out infinite; }
        .square-2 { width: 60px; height: 60px; bottom: 40%; right: 5%; animation: float5 14s ease-in-out infinite; }
        @keyframes float1 { 0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); } 25% { transform: translateY(-20px) translateX(10px) rotate(90deg); } 50% { transform: translateY(-10px) translateX(-15px) rotate(180deg); } 75% { transform: translateY(-30px) translateX(5px) rotate(270deg); } }
        @keyframes float2 { 0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); } 33% { transform: translateY(-25px) translateX(-20px) rotate(120deg); } 66% { transform: translateY(-15px) translateX(25px) rotate(240deg); } }
        @keyframes float3 { 0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); } 50% { transform: translateY(-30px) translateX(20px) rotate(180deg); } }
        @keyframes float4 { 0%, 100% { transform: translateY(0px) translateX(0px) rotate(45deg); } 50% { transform: translateY(-25px) translateX(-10px) rotate(225deg); } }
        @keyframes float5 { 0%, 100% { transform: translateY(0px) translateX(0px) rotate(45deg); } 25% { transform: translateY(-15px) translateX(15px) rotate(135deg); } 75% { transform: translateY(-35px) translateX(-5px) rotate(315deg); } }
        .fire-icon, .helmet-icon, .shield-icon, .axe-icon, .hose-icon, .hydrant-icon, .hose-long { position: absolute; color: var(--primary-color); font-size: 2rem; opacity: 0.6; animation: iconFloat 10s ease-in-out infinite; text-shadow: 0 0 10px rgba(255, 107, 53, 0.5); }
        .fire-icon { color: var(--red-accent); animation: fireFlicker 3s ease-in-out infinite; }
        .helmet-icon { color: var(--dark-gray); animation: helmetFloat 12s ease-in-out infinite; }
        .shield-icon { color: var(--gold); animation: shieldFloat 15s ease-in-out infinite; }
        .axe-icon { color: var(--dark-gray); animation: axeSwing 8s ease-in-out infinite; font-size: 1.8rem; }
        .hose-icon { color: var(--light-blue); animation: hoseFlow 6s ease-in-out infinite; font-size: 1.5rem; }
        .hydrant-icon { color: var(--red-accent); animation: hydrantPulse 4s ease-in-out infinite; font-size: 1.2rem; }
        .hose-long { color: var(--light-blue); animation: hoseLongFlow 8s ease-in-out infinite; font-size: 1.8rem; opacity: 0.4; }
        .fire-1 { top: 15%; right: 20%; }
        .helmet-1 { top: 40%; right: 10%; }
        .shield-1 { top: 60%; left: 10%; }
        .hose-1 { top: 35%; right: 5%; }
        .hydrant-1 { top: 10%; left: 30%; }
        @keyframes fireFlicker { 0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.6; } 25% { transform: scale(1.1) rotate(5deg); opacity: 0.8; } 50% { transform: scale(0.9) rotate(-5deg); opacity: 0.4; } 75% { transform: scale(1.05) rotate(3deg); opacity: 0.7; } }
        @keyframes helmetFloat { 0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.6; } 50% { transform: translateY(-20px) rotate(10deg); opacity: 0.8; } }
        @keyframes shieldFloat { 0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.5; } 33% { transform: translateY(-15px) rotate(5deg); opacity: 0.7; } 66% { transform: translateY(-10px) rotate(-5deg); opacity: 0.6; } }
        @keyframes iconFloat { 0%, 100% { transform: translateY(0px) translateX(0px); } 25% { transform: translateY(-10px) translateX(5px); } 50% { transform: translateY(-5px) translateX(-5px); } 75% { transform: translateY(-15px) translateX(3px); } }
        @keyframes axeSwing { 0%, 100% { transform: rotate(0deg) scale(1); opacity: 0.6; } 25% { transform: rotate(15deg) scale(1.1); opacity: 0.8; } 50% { transform: rotate(-10deg) scale(0.9); opacity: 0.5; } 75% { transform: rotate(5deg) scale(1.05); opacity: 0.7; } }
        @keyframes hoseFlow { 0%, 100% { transform: translateY(0px) scale(1); opacity: 0.6; } 50% { transform: translateY(-15px) scale(1.2); opacity: 0.8; } }
        @keyframes hydrantPulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.3); opacity: 0.9; } }
        @keyframes hoseLongFlow { 0%, 100% { transform: translateY(0px) scale(1) rotate(0deg); opacity: 0.4; } 25% { transform: translateY(-20px) scale(1.1) rotate(5deg); opacity: 0.6; } 50% { transform: translateY(-10px) scale(0.9) rotate(-3deg); opacity: 0.3; } 75% { transform: translateY(-25px) scale(1.05) rotate(2deg); opacity: 0.5; } }
        .modern-captcha-container { margin: 1rem 0; }
        .captcha-card { background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05)); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 0; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.2); overflow: hidden; transition: all 0.3s ease; position: relative; width: 100%; }
        .captcha-card:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3); }
        .captcha-header { background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); padding: 1.5rem; display: flex; align-items: center; gap: 1rem; position: relative; overflow: hidden; }
        .captcha-header::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%); animation: shimmer 3s infinite; }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        .captcha-icon { width: 40px; height: 40px; background: rgba(255, 255, 255, 0.9); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.25rem; color: #dc3545; position: relative; z-index: 2; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
        @keyframes firefighterPulse { 0%, 100% { transform: scale(1) rotate(0deg); box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); } 25% { transform: scale(1.05) rotate(2deg); box-shadow: 0 0 0 5px rgba(220, 53, 69, 0.2); } 50% { transform: scale(1.1) rotate(0deg); box-shadow: 0 0 0 10px rgba(220, 53, 69, 0.1); } 75% { transform: scale(1.05) rotate(-2deg); box-shadow: 0 0 0 5px rgba(220, 53, 69, 0.2); } }
        .captcha-title { flex: 1; position: relative; z-index: 2; }
        .captcha-title h6 { margin: 0; color: white; font-weight: 700; font-size: 1.1rem; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); }
        .captcha-title p { margin: 0.25rem 0 0 0; color: rgba(255, 255, 255, 0.9); font-size: 0.9rem; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); }
        .captcha-body { padding: 2rem; }
        .modern-checkbox-wrapper { position: relative; }
        .modern-checkbox { position: absolute; opacity: 0; cursor: pointer; height: 0; width: 0; }
        .modern-checkbox-label { display: flex; align-items: flex-start; gap: 1rem; cursor: pointer; padding: 1rem; border-radius: 15px; background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease; position: relative; overflow: hidden; }
        .modern-checkbox-label::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); opacity: 0; transition: opacity 0.3s ease; z-index: 0; }
        .modern-checkbox-label:hover { border-color: rgba(255, 107, 53, 0.3); background: rgba(255, 255, 255, 0.1); transform: translateY(-1px); }
        .checkmark { width: 24px; height: 24px; background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 6px; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; position: relative; z-index: 2; flex-shrink: 0; }
        .checkmark i { color: white; font-size: 0.8rem; opacity: 0; transform: scale(0); transition: all 0.3s ease; }
        .modern-checkbox:checked + .modern-checkbox-label .checkmark { background: linear-gradient(135deg, #dc3545, #c82333); border-color: #dc3545; box-shadow: 0 0 20px rgba(220, 53, 69, 0.4); }
        .modern-checkbox:checked + .modern-checkbox-label .checkmark i { opacity: 1; transform: scale(1); }
        .modern-checkbox:checked + .modern-checkbox-label::before { opacity: 0.1; }
        .captcha-footer { padding: 1rem 2rem; background: rgba(0, 0, 0, 0.1); border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .security-badges { display: flex; gap: 0.75rem; justify-content: center; }
        .badge { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; color: rgba(255, 255, 255, 0.9); font-size: 0.8rem; font-weight: 500; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); transition: all 0.3s ease; }
        .badge:hover { background: rgba(255, 255, 255, 0.15); transform: translateY(-1px); }
        .badge i { font-size: 0.9rem; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none !important; }
        .input-group-text { min-width: 36px; height: 36px; padding: .25rem .5rem; display: inline-flex; align-items: center; justify-content: center; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.3); background-color: rgba(255, 255, 255, 0.9); }
        .login-body .input-group { width: 100%; }
        .login-body .input-group .form-select, .login-body .input-group .form-control { flex: 1; min-height: 36px; }
        .ceib-logo-inline { height: 32px; width: auto; margin-right: 0.5rem; vertical-align: middle; border-radius: 4px; background: rgba(255,255,255,0.9); padding: 2px; }
        @media (max-width: 768px) {
            .login-container { flex-direction: column; padding: 0.75rem; }
            .login-sidebar { order: 2; padding: 0.75rem; }
            .login-form-section { order: 1; padding: 0.75rem; }
            .login-body { max-width: 384px; padding: 1rem; margin: 0 auto; }
            .logos-container { gap: 0.75rem; margin-bottom: 1rem; }
            .cbmepi-logo, .sysgabom-logo { width: 140px; height: 140px; }
            .floating-circle, .floating-square { opacity: 0.4; }
            .floating-elements { display: none; }
            .login-header h1 { font-size: 1.25rem; }
            .login-header p { font-size: 0.85rem; }
            .captcha-header { padding: 1rem; }
            .captcha-body { padding: 1rem; }
            .captcha-footer { padding: 0.75rem 1rem; }
            .checkmark { width: 28px; height: 28px; }
            .password-toggle-btn { padding: 8px 12px; }
            .btn-login { padding: 1rem 1.25rem; font-size: 1.1rem; }
        }
        @media (min-width: 1200px) { .login-body { max-width: 450px; } .floating-circle, .floating-square { opacity: 0.8; } }
        .password-toggle-btn { cursor: pointer; }
        .password-toggle-btn i { font-size: 1rem; }
        .form-control-wrapper { position: relative; flex: 1; display: flex; align-items: center; }
        .password-toggle-inside { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: #666; padding: 0; }
        .password-toggle-inside i { font-size: 1rem; }
        .form-control.has-eye { padding-right: 2rem; }
        .uniform-label { display: block; width: 100%; height: 22px; line-height: 22px; font-size: .95rem; font-weight: 500; margin-bottom: .25rem; }
        .uniform-label-large { height: 22px; line-height: 22px; font-size: .95rem; margin-bottom: .3rem; }
        .uniform-label-xlarge { height: 26px; line-height: 26px; font-size: 1.1rem; font-weight: 600; margin-bottom: .4rem; }
        .input-group { align-items: stretch; }
        .input-group .input-group-text { border-top-right-radius: 0; border-bottom-right-radius: 0; }
        .input-group .form-select, .input-group .form-control, .input-group .form-control-wrapper { border-top-left-radius: 0; border-bottom-left-radius: 0; }
        .input-group .form-select, .input-group .form-control { height: 36px; }
        .input-group .form-control-wrapper { height: 36px; }
</style>
{% if is_apk or request.GET.apk %}
<style>
    body { background: var(--primary-color) !important; }
    body.apk-mode::before, body.apk-mode::after { display: none !important; content: none !important; }
    .floating-elements { display: none !important; }
    .login-body { background: transparent !important; border: 1px solid #dee2e6 !important; box-shadow: 0 4px 12px rgba(0,0,0,0.08) !important; }
    .form-control, .form-select { border: 1px solid #ced4da !important; background-color: #fff !important; }
    .form-control:focus, .form-select:focus { border-color: var(--primary-color) !important; box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.15) !important; }
    .btn-login { background: linear-gradient(135deg, var(--primary-color), var(--accent-color)) !important; }
    .login-header h1, .login-header p { color: #333333 !important; }
    .input-group-text i, .form-label i, .btn i { display: none !important; }
    .input-group-text { display: none !important; }
    .logos-container { display: flex; align-items: center; justify-content: center; gap: .75rem; width: 100%; max-width: 440px; margin: 0 auto .75rem; }
    .cbmepi-logo, .sysgabom-logo { width: 120px; height: 120px; display: flex; align-items: center; justify-content: center; }
    .cbmepi-logo img, .sysgabom-logo img { width: 88%; height: 88%; object-fit: contain; }
</style>
{% endif %}
</head>
<body>
    <script>
        (function(){
            try {
                var ua = navigator.userAgent || '';
                var isApk = (/Android/.test(ua) && (/; wv/.test(ua) || /Version\//.test(ua))) || window.location.search.indexOf('apk=1') !== -1;
                if (isApk) { document.body.classList.add('apk-mode'); }
            } catch(e){}
        })();
    </script>
    <div class="floating-elements">
        <div class="floating-circle circle-1"></div>
        <div class="floating-circle circle-2"></div>
        <div class="floating-circle circle-3"></div>
        <div class="floating-square square-1"></div>
        <div class="floating-square square-2"></div>
        <div class="fire-icon fire-1"><i class="fas fa-fire"></i></div>
        <div class="helmet-icon helmet-1"><i class="fas fa-hard-hat"></i></div>
        <div class="shield-icon shield-1"><i class="fas fa-shield-alt"></i></div>
        <div class="hose-icon hose-1"><i class="fas fa-tint"></i></div>
        <div class="hydrant-icon hydrant-1"><i class="fas fa-circle"></i></div>
    </div>
    
    <div class="login-container">
        <div class="login-sidebar">
            <div class="login-header">
                <div class="logos-container">
                    <div class="cbmepi-logo">
                        <img src="{% static 'logo_cbmepi.png' %}" alt="Logo CBMEPI">
                    </div>
                    <div class="sysgabom-logo">
                        <img src="{% static 'CEIB.png' %}" alt="Logo CEIB">
                    </div>
                </div>
                <h1>SYEBOM - Sistema de Ensino do CBMEPI</h1>
            </div>
        </div>
        <div class="login-form-section">
            <div class="login-body">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    {% endfor %}
                {% endif %}
                <form method="post" id="loginForm">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="tipo_usuario" class="form-label uniform-label uniform-label-large">Tipo de Usuário</label>
                        <select class="form-select w-100" id="tipo_usuario" name="tipo_usuario" required>
                            <option value="">Selecione o tipo de usuário</option>
                            <option value="aluno">Aluno</option>
                            <option value="instrutor">Instrutor</option>
                            <option value="monitor">Monitor</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="identificador" class="form-label uniform-label uniform-label-large">Matrícula/CPF</label>
                        <input type="text" class="form-control w-100" id="identificador" name="identificador" placeholder="Matrícula/CPF" required autofocus inputmode="numeric" autocomplete="username" autocapitalize="none" autocomplete="off">
                    </div>
                    <div class="mb-3">
                        <label for="senha" class="form-label uniform-label uniform-label-large">Senha</label>
                        <div class="form-control-wrapper">
                            <input type="password" class="form-control has-eye w-100" id="senha" name="senha" placeholder="Senha" autocomplete="current-password" required autocapitalize="none">
                            <button type="button" class="password-toggle-inside" id="togglePassword" aria-label="Mostrar/ocultar senha">
                                <i class="fas fa-eye" id="togglePasswordIcon"></i>
                            </button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="modern-captcha-container">
                            <div class="captcha-card">
                                <div class="captcha-header">
                                </div>
                                <div class="captcha-body">
                                    <div class="modern-checkbox-wrapper">
                                        <input type="checkbox" name="nao_sou_robo" id="id_nao_sou_robo" class="modern-checkbox" required onchange="validateModernCaptcha()">
                                        <label for="id_nao_sou_robo" class="modern-checkbox-label">
                                            <span class="checkmark">
                                                <i class="fas fa-check"></i>
                                            </span>
                                            <span class="captcha-inline-icon">
                                                <i class="fas fa-hard-hat"></i>
                                            </span>
                                            <span class="label-text">
                                                <strong>Eu confirmo que sou um Bombeiro Militar</strong>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-login{% if is_apk or request.GET.apk %} btn-sm{% endif %}" disabled>
                            <i class="fas fa-sign-in-alt me-2"></i>Entrar
                        </button>
                    </div>
                </form>
                <div class="mt-4 pt-3 border-top border-light border-opacity-25">
                    <div class="d-grid">
                        <a href="{% url 'login' %}" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-arrow-left me-1"></i>Voltar ao login principal
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    {% if not is_apk and not request.GET.apk %}
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {% endif %}
    
    <script>
                        
        document.getElementById('tipo_usuario').addEventListener('change', function() {
            const tipo = this.value;
            const identificadorInput = document.getElementById('identificador');
            if (tipo === 'aluno') {
                identificadorInput.placeholder = 'Matrícula/CPF';
            } else if (tipo === 'instrutor' || tipo === 'monitor') {
                identificadorInput.placeholder = 'CPF';
            } else {
                identificadorInput.placeholder = 'Matrícula/CPF';
            }
        });
        function validateModernCaptcha() {
            const checkbox = document.getElementById('id_nao_sou_robo');
            const submitBtn = document.querySelector('button[type="submit"]');
            const captchaCard = document.querySelector('.captcha-card');
            const checkmark = document.querySelector('.checkmark');
            if (checkbox.checked) {
                submitBtn.disabled = false;
                submitBtn.classList.remove('btn-secondary');
                submitBtn.classList.add('btn-login');
                captchaCard.classList.add('captcha-success');
                checkmark.style.animation = 'successPulse 0.6s ease-in-out';
                setTimeout(() => { captchaCard.classList.remove('captcha-success'); }, 600);
            } else {
                submitBtn.disabled = true;
                submitBtn.classList.remove('btn-login');
                submitBtn.classList.add('btn-secondary');
            }
        }
        document.addEventListener('DOMContentLoaded', function(){
            validateModernCaptcha();
            var senhaInput = document.getElementById('senha');
            var toggleBtn = document.getElementById('togglePassword');
            var toggleIcon = document.getElementById('togglePasswordIcon');
            if (toggleBtn && senhaInput && toggleIcon) {
                toggleBtn.addEventListener('click', function(){
                    var isPassword = senhaInput.getAttribute('type') === 'password';
                    senhaInput.setAttribute('type', isPassword ? 'text' : 'password');
                    toggleIcon.classList.toggle('fa-eye');
                    toggleIcon.classList.toggle('fa-eye-slash');
                });
            }
        });
    </script>
</body>
</html>
        .captcha-inline-icon { display: flex; align-items: center; font-size: 1.1rem; color: #dc3545; }
