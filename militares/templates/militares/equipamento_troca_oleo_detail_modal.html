<div class="modal-header bg-primary text-white">
    <h5 class="modal-title">
        <i class="fas fa-oil-can me-2"></i>Detalhes da Troca de Óleo
    </h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
    <div class="row">
        <div class="col-md-6">
            <h6 class="text-primary mb-3"><i class="fas fa-info-circle me-2"></i>Informações da Troca</h6>
            <table class="table table-sm table-borderless">
                <tr>
                    <th width="40%">Equipamento:</th>
                    <td><strong>{{ troca.equipamento.codigo }}</strong></td>
                </tr>
                <tr>
                    <th>Data/Hora:</th>
                    <td>{{ troca.data_troca|date:"d/m/Y H:i" }}</td>
                </tr>
                <tr>
                    <th>Horas de Uso:</th>
                    <td><strong>{{ troca.horas_uso_troca|floatformat:2 }}h</strong></td>
                </tr>
                <tr>
                    <th>Tipo de Óleo:</th>
                    <td><span class="badge bg-info">{{ troca.get_tipo_oleo_display }}</span></td>
                </tr>
                {% if troca.nome_oleo %}
                <tr>
                    <th>Nome do Óleo:</th>
                    <td>{{ troca.nome_oleo }}</td>
                </tr>
                {% endif %}
                <tr>
                    <th>Quantidade (L):</th>
                    <td><strong>{{ troca.quantidade_litros|floatformat:2 }}L</strong></td>
                </tr>
                <tr>
                    <th>Valor Total:</th>
                    <td><strong class="text-success">R$ {{ troca.valor_total|floatformat:2 }}</strong></td>
                </tr>
                <tr>
                    <th>Oficina/Fornecedor:</th>
                    <td>{{ troca.fornecedor_oficina|default:"-" }}</td>
                </tr>
                {% if troca.proximas_horas_troca %}
                <tr>
                    <th>Próximas Horas Troca:</th>
                    <td><strong>{{ troca.proximas_horas_troca|floatformat:2 }}h</strong></td>
                </tr>
                {% endif %}
            </table>
        </div>
        
        <div class="col-md-6">
            <h6 class="text-primary mb-3"><i class="fas fa-user me-2"></i>Responsável e Status</h6>
            <table class="table table-sm table-borderless">
                <tr>
                    <th width="40%">Responsável:</th>
                    <td>
                        {% if troca.responsavel %}
                            {{ troca.responsavel.get_posto_graduacao_display }} {{ troca.responsavel.nome_completo }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Trocou Filtro:</th>
                    <td>
                        {% if troca.trocou_filtro_oleo %}
                            <span class="badge bg-success">Sim</span>
                            {% if troca.valor_filtro_oleo %}
                                <br><small class="text-muted">Valor: R$ {{ troca.valor_filtro_oleo|floatformat:2 }}</small>
                            {% endif %}
                        {% else %}
                            <span class="badge bg-secondary">Não</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Ativo:</th>
                    <td>
                        {% if troca.ativo %}
                            <span class="badge bg-success">Sim</span>
                        {% else %}
                            <span class="badge bg-secondary">Não</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Criado por:</th>
                    <td>{{ troca.criado_por.get_full_name|default:troca.criado_por.username }}</td>
                </tr>
                <tr>
                    <th>Data de Criação:</th>
                    <td>{{ troca.data_criacao|date:"d/m/Y H:i" }}</td>
                </tr>
            </table>
        </div>
    </div>
    
    {% if troca.outras_pecas %}
    <div class="row mt-3">
        <div class="col-12">
            <h6 class="text-primary mb-2"><i class="fas fa-cog me-2"></i>Outras Peças</h6>
            <p class="text-muted">{{ troca.outras_pecas }}</p>
            {% if troca.valor_outras_pecas %}
                <p class="text-muted"><strong>Valor: R$ {{ troca.valor_outras_pecas|floatformat:2 }}</strong></p>
            {% endif %}
        </div>
    </div>
    {% endif %}
    
    {% if troca.observacoes %}
    <div class="row mt-3">
        <div class="col-12">
            <h6 class="text-primary mb-2"><i class="fas fa-sticky-note me-2"></i>Observações</h6>
            <p class="text-muted">{{ troca.observacoes }}</p>
        </div>
    </div>
    {% endif %}
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
    {% if 'EQUIPAMENTOS_OPERACIONAIS_EDITAR' in menu_permissions or user.is_superuser %}
    <button type="button" class="btn btn-primary" onclick="abrirModalEditarTrocaOleo({{ troca.pk }})">
        <i class="fas fa-edit me-2"></i>Editar
    </button>
    {% endif %}
</div>

