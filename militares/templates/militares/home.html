{% extends 'base.html' %}
{% load static %}

{% block title %}Página Inicial - SysGabom{% endblock %}

{% block extra_css %}
<style>
    .welcome-section {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
        color: white;
        border-radius: 15px;
        padding: 2rem;
        margin-bottom: 2rem;
        text-align: center;
    }
    
    .welcome-section h2 {
        margin-bottom: 1rem;
    }
    
    .welcome-section p {
        opacity: 0.9;
        margin-bottom: 0;
    }
    
    .content-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 1.5rem;
        border: 1px solid #e5e7eb;
    }
    
    .content-card h5 {
        color: var(--primary-color);
        font-weight: bold;
        margin-bottom: 1rem;
        border-bottom: 2px solid var(--primary-color);
        padding-bottom: 0.5rem;
    }
    
    .boletim-card {
        transition: all 0.3s ease;
        border: 1px solid #e5e7eb;
    }
    
    .boletim-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: var(--primary-color);
    }
    
    
    
    .list-group-item {
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        margin-bottom: 8px;
        transition: all 0.3s ease;
    }
    
    .list-group-item:hover {
        background-color: #f8f9fa;
        border-color: var(--primary-color);
        transform: translateX(5px);
    }
    
    .list-group-item:last-child {
        margin-bottom: 0;
    }
    
    /* Estilos para cards de escalas */
    .escala-card {
        background: white;
        border-radius: 8px;
        padding: 0.75rem;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        margin-bottom: 0.75rem;
        border: 1px solid #e5e7eb;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    .escala-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: var(--primary-color);
    }
    
    .escala-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    }
    
    .escala-header {
        display: flex;
        justify-content: between;
        align-items: center;
        margin-bottom: 0.75rem;
    }
    
    .escala-data {
        font-size: 1rem;
        font-weight: bold;
        color: var(--primary-color);
    }
    
    .dia-semana {
        font-size: 0.85rem;
        font-weight: 500;
        color: #6c757d;
        margin-top: 2px;
        text-transform: capitalize;
    }
    
    .escala-status {
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
    }
    
    .status-pendente {
        background-color: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
    }
    
    .status-ativa {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }
    
    .status-aprovada {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
    }
    
    .status-concluida {
        background-color: #e2e3e5;
        color: #383d41;
        border: 1px solid #d6d8db;
    }
    
    .escala-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.75rem;
    }
    
    .info-item {
        display: flex;
        align-items: flex-start;
        gap: 0.375rem;
        margin-bottom: 0.25rem;
    }
    
    .info-item i {
        color: var(--primary-color);
        width: 14px;
        margin-top: 0.1rem;
        flex-shrink: 0;
        font-size: 0.75rem;
    }
    
    .info-label {
        font-weight: 500;
        color: #6b7280;
        font-size: 0.7rem;
        margin-bottom: 0.1rem;
    }
    
    .info-value {
        color: #374151;
        font-weight: 600;
        font-size: 0.75rem;
        line-height: 1.1;
    }
    
    .escala-tipo {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
    }
    
    .tipo-operacional {
        background-color: #fef2f2;
        color: #dc2626;
        border: 1px solid #fecaca;
    }
    
    .tipo-administrativo {
        background-color: #f0f9ff;
        color: #2563eb;
        border: 1px solid #bfdbfe;
    }
    
    .escala-militares {
        margin-top: 0.5rem;
        padding-top: 0.5rem;
        border-top: 1px solid #e5e7eb;
    }
    
    .escala-actions {
        padding-top: 0.5rem;
        border-top: 1px solid #e5e7eb;
    }
    
    .escala-actions .btn {
        border-radius: 8px;
        font-size: 0.85rem;
        font-weight: 500;
        transition: all 0.3s ease;
    }
    
    .escala-actions .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .militares-count {
        font-size: 0.9rem;
        color: #6b7280;
        margin-bottom: 0.5rem;
    }
    
    .militares-list {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
    }
    
    @media (max-width: 768px) {
        .militares-list {
            grid-template-columns: 1fr;
        }
    }
    
    .militar-badge {
        background-color: #f3f4f6;
        color: #374151;
        padding: 0.25rem 0.5rem;
        border-radius: 10px;
        font-size: 0.8rem;
        border: 1px solid #d1d5db;
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        white-space: nowrap;
    }
    
    .militar-badge i {
        font-size: 0.7rem;
        opacity: 0.8;
    }
    
    .militar-badge.bg-primary {
        background-color: var(--primary-color) !important;
        color: white !important;
        border-color: var(--primary-color) !important;
    }
    
    .escalas-section {
        margin-bottom: 2rem;
    }
    
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .section-title {
        color: var(--primary-color);
        font-weight: bold;
        margin-bottom: 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .month-navigation {
        display: flex;
        align-items: center;
        gap: 1rem;
    }
    
    .month-selector, .year-selector {
        background: white;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
        color: #374151;
    }
    
    .year-selector {
        min-width: 80px;
    }
    
    .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: #6b7280;
    }
    
    .empty-state i {
        font-size: 3rem;
        margin-bottom: 1rem;
        opacity: 0.5;
    }
    
    /* Estilos para card de férias com fundo de praia */
    .ferias-card {
        background: linear-gradient(to bottom, #87CEEB 0%, #5DADE2 25%, #48C9B0 30%, #F7DC6F 35%, #F8C471 40%, #F5B041 100%);
        position: relative;
        border-radius: 15px;
        padding: 0;
        box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        margin-bottom: 1.5rem;
        border: none;
        overflow: hidden;
    }
    
    .ferias-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 40%;
        background: linear-gradient(180deg, rgba(135, 206, 235, 0.9) 0%, rgba(93, 173, 226, 0.7) 100%);
        pointer-events: none;
    }
    
    .ferias-card::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60%;
        background: linear-gradient(0deg, rgba(248, 196, 113, 0.95) 0%, rgba(245, 176, 65, 0.9) 100%);
        pointer-events: none;
    }
    
    .ferias-card-content {
        position: relative;
        z-index: 1;
        background: rgba(255, 255, 255, 0.95);
        margin: 1rem;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .ferias-card h5 {
        color: #2c3e50;
        font-weight: 700;
        margin-bottom: 1.25rem;
        padding-bottom: 0.75rem;
        border-bottom: 3px solid #3498db;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .ferias-card h5 i {
        color: #3498db;
    }
    
    .ferias-info-item {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 0.75rem 0;
        border-bottom: 1px solid #ecf0f1;
    }
    
    .ferias-info-item:last-child {
        border-bottom: none;
    }
    
    .ferias-info-item i {
        color: #3498db;
        font-size: 1.1rem;
        margin-top: 0.2rem;
        min-width: 20px;
    }
    
    .ferias-info-item strong {
        color: #34495e;
        min-width: 100px;
    }
    
    .ferias-info-item span {
        color: #2c3e50;
        font-weight: 500;
    }
    
    .ferias-contador-box {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
        border-radius: 12px;
        padding: 1.5rem;
        text-align: center;
        color: white;
        box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
    }
    
    .ferias-contador-numero {
        font-size: 3rem;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 0.5rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .ferias-contador-texto {
        font-size: 0.95rem;
        opacity: 0.95;
        font-weight: 500;
    }
    
    /* Estilos para card de licença especial com fundo especial */
    .licenca-especial-card {
        background: linear-gradient(to bottom, #9B59B6 0%, #8E44AD 25%, #7D3C98 30%, #6C3483 35%, #5B2C6F 40%, #4A235A 100%);
        position: relative;
        border-radius: 15px;
        padding: 0;
        box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        margin-bottom: 1.5rem;
        border: none;
        overflow: hidden;
    }
    
    .licenca-especial-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 40%;
        background: linear-gradient(180deg, rgba(155, 89, 182, 0.9) 0%, rgba(142, 68, 173, 0.7) 100%);
        pointer-events: none;
    }
    
    .licenca-especial-card::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60%;
        background: linear-gradient(0deg, rgba(108, 52, 131, 0.95) 0%, rgba(91, 44, 111, 0.9) 100%);
        pointer-events: none;
    }
    
    .licenca-especial-card-content {
        position: relative;
        z-index: 1;
        background: rgba(255, 255, 255, 0.95);
        margin: 1rem;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .licenca-especial-card h5 {
        color: #2c3e50;
        font-weight: 700;
        margin-bottom: 1.25rem;
        padding-bottom: 0.75rem;
        border-bottom: 3px solid #9B59B6;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .licenca-especial-card h5 i {
        color: #9B59B6;
    }
    
    .licenca-especial-info-item {
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        padding: 0.75rem 0;
        border-bottom: 1px solid #ecf0f1;
    }
    
    .licenca-especial-info-item:last-child {
        border-bottom: none;
    }
    
    .licenca-especial-info-item i {
        color: #9B59B6;
        font-size: 1.1rem;
        margin-top: 0.2rem;
        min-width: 20px;
    }
    
    .licenca-especial-info-item strong {
        color: #34495e;
        min-width: 100px;
    }
    
    .licenca-especial-info-item span {
        color: #2c3e50;
        font-weight: 500;
    }
    
    .licenca-especial-contador-box {
        background: linear-gradient(135deg, #9B59B6 0%, #7D3C98 100%);
        border-radius: 12px;
        padding: 1.5rem;
        text-align: center;
        color: white;
        box-shadow: 0 4px 15px rgba(155, 89, 182, 0.3);
    }
    
    .licenca-especial-contador-numero {
        font-size: 3rem;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 0.5rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .licenca-especial-contador-texto {
        font-size: 0.95rem;
        opacity: 0.95;
        font-weight: 500;
    }
    
    /* Estilos para acordeões */
    .accordion-button {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
        color: white;
        border: none;
        font-weight: bold;
        padding: 1rem 1.5rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
    }
    
    .accordion-button:not(.collapsed) {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
        color: white;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .accordion-button:focus {
        box-shadow: 0 0 0 0.25rem rgba(var(--primary-color-rgb), 0.25);
        border: none;
    }
    
    .accordion-button::after {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='white'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
        transition: transform 0.3s ease;
    }
    
    .accordion-button:not(.collapsed)::after {
        transform: rotate(180deg);
    }
    
    .accordion-item {
        border: 1px solid #e5e7eb;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 1.5rem;
    }
    
    .accordion-body {
        padding: 1.5rem;
        background: white;
    }
    
    .accordion-button .month-navigation {
        margin-left: auto;
    }
    
    .accordion-button .month-navigation .btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
    }
    
    .accordion-button .month-navigation .btn:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
        color: white;
    }
    
    .accordion-button .month-navigation select {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
    }
    
    .accordion-button .month-navigation select option {
        background: var(--primary-color);
        color: white;
    }
    
    .accordion-button .badge {
        background: rgba(255, 255, 255, 0.2) !important;
        color: white !important;
        border: 1px solid rgba(255, 255, 255, 0.3);
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Seção de Boas-vindas -->
    <div class="welcome-section">
        <h2>
            <i class="fas fa-hand-wave me-2"></i>
            Bem-vindo ao SysGabom!
        </h2>
        <p>Sistema de Gerenciamento Administrativo do Corpo de Bombeiros Militar do Estado do Piauí</p>
    </div>

    <!-- Card de Próximas Férias -->
    {% if user.militar and proximas_ferias %}
    <div class="ferias-card">
        <div class="ferias-card-content">
            <h5>
                <i class="fas fa-umbrella-beach"></i>
                Próximas Férias
            </h5>
            <div class="row g-3">
                <div class="col-lg-8">
                    <div class="ferias-info-item">
                        <i class="fas fa-calendar-alt"></i>
                        <strong>Período:</strong>
                        <span>{{ proximas_ferias.data_inicio|date:"d/m/Y" }} a {{ proximas_ferias.data_fim|date:"d/m/Y" }}</span>
                    </div>
                    <div class="ferias-info-item">
                        <i class="fas fa-clock"></i>
                        <strong>Duração:</strong>
                        <span>{{ proximas_ferias.quantidade_dias }} dia{{ proximas_ferias.quantidade_dias|pluralize }}</span>
                    </div>
                    <div class="ferias-info-item">
                        <i class="fas fa-info-circle"></i>
                        <strong>Status:</strong>
                        <span>
                            {% if proximas_ferias.status == 'PLANEJADA' %}
                                <span class="badge bg-info">{{ proximas_ferias.get_status_display }}</span>
                            {% elif proximas_ferias.status == 'GOZANDO' %}
                                <span class="badge bg-warning text-dark">{{ proximas_ferias.get_status_display }}</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="ferias-contador-box">
                        <div id="contador-ferias">
                            <div class="ferias-contador-numero" id="dias-restantes">-</div>
                            <div class="ferias-contador-texto" id="texto-contador">Calculando...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="data-inicio-ferias" value="{{ proximas_ferias.data_inicio|date:'Y-m-d' }}">
        <input type="hidden" id="status-ferias" value="{{ proximas_ferias.status }}">
    </div>
    {% endif %}

    <!-- Card de Próxima Licença Especial -->
    {% if user.militar and proxima_licenca_especial %}
    <div class="licenca-especial-card">
        <div class="licenca-especial-card-content">
            <h5>
                <i class="fas fa-certificate"></i>
                Próxima Licença Especial
            </h5>
            <div class="row g-3">
                <div class="col-lg-8">
                    <div class="licenca-especial-info-item">
                        <i class="fas fa-calendar-alt"></i>
                        <strong>Período:</strong>
                        <span>{{ proxima_licenca_especial.data_inicio|date:"d/m/Y" }} a {{ proxima_licenca_especial.data_fim|date:"d/m/Y"|default:"-" }}</span>
                    </div>
                    <div class="licenca-especial-info-item">
                        <i class="fas fa-clock"></i>
                        <strong>Duração:</strong>
                        <span>{{ proxima_licenca_especial.quantidade_meses }} mês{{ proxima_licenca_especial.quantidade_meses|pluralize:"es" }}</span>
                    </div>
                    <div class="licenca-especial-info-item">
                        <i class="fas fa-hashtag"></i>
                        <strong>Decênio:</strong>
                        <span>{{ proxima_licenca_especial.decenio }}º Decênio</span>
                    </div>
                    <div class="licenca-especial-info-item">
                        <i class="fas fa-info-circle"></i>
                        <strong>Status:</strong>
                        <span>
                            {% if proxima_licenca_especial.status == 'PLANEJADA' %}
                                <span class="badge bg-info">{{ proxima_licenca_especial.get_status_display }}</span>
                            {% elif proxima_licenca_especial.status == 'GOZANDO' %}
                                <span class="badge bg-warning text-dark">{{ proxima_licenca_especial.get_status_display }}</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="licenca-especial-contador-box">
                        <div id="contador-licenca-especial">
                            <div class="licenca-especial-contador-numero" id="dias-restantes-licenca">-</div>
                            <div class="licenca-especial-contador-texto" id="texto-contador-licenca">Calculando...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="data-inicio-licenca-especial" value="{{ proxima_licenca_especial.data_inicio|date:'Y-m-d' }}">
        <input type="hidden" id="status-licenca-especial" value="{{ proxima_licenca_especial.status }}">
    </div>
    {% endif %}

    <!-- Card de Licenciamento Próximo ao Vencimento -->
    {% if proximo_licenciamento_vencer %}
    <div class="content-card mb-4 border-warning border-3" id="card-licenciamento-alerta" style="position: sticky; top: 20px; z-index: 1000; background: white;">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="text-warning mb-0">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Licenciamento Próximo ao Vencimento
            </h5>
            <button type="button" class="btn btn-sm btn-close" aria-label="Fechar" onclick="document.getElementById('card-licenciamento-alerta').style.display='none';"></button>
        </div>
        <div class="alert alert-warning mb-0">
            <div class="row g-3">
                <div class="col-lg-8">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-car me-2"></i>
                        <strong>Viatura:</strong>
                        <span class="ms-2">{{ proximo_licenciamento_vencer.viatura.placa }}</span>
                        {% if proximo_licenciamento_vencer.viatura.prefixo %}
                            <span class="text-muted ms-2">({{ proximo_licenciamento_vencer.viatura.prefixo }})</span>
                        {% endif %}
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-calendar-alt me-2"></i>
                        <strong>Próximo Vencimento:</strong>
                        <span class="ms-2 text-danger fw-bold">{{ proximo_licenciamento_vencer.proximo_vencimento|date:"d/m/Y" }}</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-user me-2"></i>
                        <strong>Responsável:</strong>
                        <span class="ms-2">
                            {% if proximo_licenciamento_vencer.responsavel %}
                                {{ proximo_licenciamento_vencer.responsavel.get_posto_graduacao_display }} {{ proximo_licenciamento_vencer.responsavel.nome_completo }}
                            {% else %}
                                <span class="text-muted">Não informado</span>
                            {% endif %}
                        </span>
                    </div>
                    {% if licenciamentos_alertas|length > 1 %}
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            <strong>Total de {{ licenciamentos_alertas|length }} licenciamentos</strong> próximos ao vencimento nos próximos 5 dias.
                        </small>
                    </div>
                    {% endif %}
                </div>
                <div class="col-lg-4">
                    <div class="text-center">
                        <div class="mb-3">
                            <div class="h3 text-danger mb-1" id="dias-restantes-licenciamento">-</div>
                            <div class="text-muted" id="texto-contador-licenciamento">Calculando...</div>
                        </div>
                        <a href="{% url 'militares:licenciamento_list' %}" class="btn btn-warning btn-sm">
                            <i class="fas fa-list me-2"></i>Ver Todos os Licenciamentos
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="data-vencimento-licenciamento" value="{{ proximo_licenciamento_vencer.proximo_vencimento|date:'Y-m-d' }}">
    </div>
    {% endif %}

    <!-- Card de Manutenção Próxima -->
    {% if proxima_manutencao %}
    <div class="content-card mb-4 border-warning border-3" id="card-manutencao-alerta" style="position: sticky; top: 20px; z-index: 1000; background: white;">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="text-warning mb-0">
                <i class="fas fa-wrench me-2"></i>
                Manutenção Próxima
            </h5>
            <button type="button" class="btn btn-sm btn-close" aria-label="Fechar" onclick="document.getElementById('card-manutencao-alerta').style.display='none';"></button>
        </div>
        <div class="alert alert-warning mb-0">
            <div class="row g-3">
                <div class="col-lg-8">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-car me-2"></i>
                        <strong>Viatura:</strong>
                        <span class="ms-2">{{ proxima_manutencao.viatura.placa }}</span>
                        {% if proxima_manutencao.viatura.prefixo %}
                            <span class="text-muted ms-2">({{ proxima_manutencao.viatura.prefixo }})</span>
                        {% endif %}
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-tachometer-alt me-2"></i>
                        <strong>KM Atual:</strong>
                        <span class="ms-2">{{ proxima_manutencao.viatura.km_atual|floatformat:0 }} km</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-tools me-2"></i>
                        <strong>Próxima Revisão:</strong>
                        <span class="ms-2 text-danger fw-bold">{{ proxima_manutencao.proximo_km_revisao|floatformat:0 }} km</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-user me-2"></i>
                        <strong>Responsável:</strong>
                        <span class="ms-2">
                            {% if proxima_manutencao.responsavel %}
                                {{ proxima_manutencao.responsavel.get_posto_graduacao_display }} {{ proxima_manutencao.responsavel.nome_completo }}
                            {% else %}
                                <span class="text-muted">Não informado</span>
                            {% endif %}
                        </span>
                    </div>
                    {% if manutencoes_alertas|length > 1 %}
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            <strong>Total de {{ manutencoes_alertas|length }} manutenções</strong> próximas (faltam menos de 1000 km).
                        </small>
                    </div>
                    {% endif %}
                </div>
                <div class="col-lg-4">
                    <div class="text-center">
                        <div class="mb-3">
                            <div class="h3 text-danger mb-1" id="km-restantes-manutencao">-</div>
                            <div class="text-muted" id="texto-contador-manutencao">Calculando...</div>
                        </div>
                        <a href="{% url 'militares:manutencao_list' %}" class="btn btn-warning btn-sm">
                            <i class="fas fa-list me-2"></i>Ver Todas as Manutenções
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="km-atual-manutencao" value="{{ proxima_manutencao.viatura.km_atual }}">
        <input type="hidden" id="km-proximo-manutencao" value="{{ proxima_manutencao.proximo_km_revisao }}">
    </div>
    {% endif %}

    <!-- Card de Troca de Óleo Próxima -->
    {% if proxima_troca_oleo %}
    <div class="content-card mb-4 border-info border-3" id="card-troca-oleo-alerta" style="position: sticky; top: 20px; z-index: 1000; background: white;">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="text-info mb-0">
                <i class="fas fa-oil-can me-2"></i>
                Troca de Óleo Próxima
            </h5>
            <button type="button" class="btn btn-sm btn-close" aria-label="Fechar" onclick="document.getElementById('card-troca-oleo-alerta').style.display='none';"></button>
        </div>
        <div class="alert alert-info mb-0">
            <div class="row g-3">
                <div class="col-lg-8">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-car me-2"></i>
                        <strong>Viatura:</strong>
                        <span class="ms-2">{{ proxima_troca_oleo.viatura.placa }}</span>
                        {% if proxima_troca_oleo.viatura.prefixo %}
                            <span class="text-muted ms-2">({{ proxima_troca_oleo.viatura.prefixo }})</span>
                        {% endif %}
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-tachometer-alt me-2"></i>
                        <strong>KM Atual:</strong>
                        <span class="ms-2">{{ proxima_troca_oleo.viatura.km_atual|floatformat:0 }} km</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-oil-can me-2"></i>
                        <strong>Próxima Troca:</strong>
                        <span class="ms-2 text-danger fw-bold">{{ proxima_troca_oleo.proximo_km_troca|floatformat:0 }} km</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-user me-2"></i>
                        <strong>Responsável:</strong>
                        <span class="ms-2">
                            {% if proxima_troca_oleo.responsavel %}
                                {{ proxima_troca_oleo.responsavel.get_posto_graduacao_display }} {{ proxima_troca_oleo.responsavel.nome_completo }}
                            {% else %}
                                <span class="text-muted">Não informado</span>
                            {% endif %}
                        </span>
                    </div>
                    {% if trocas_oleo_alertas|length > 1 %}
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            <strong>Total de {{ trocas_oleo_alertas|length }} trocas de óleo</strong> próximas (faltam menos de 1000 km).
                        </small>
                    </div>
                    {% endif %}
                </div>
                <div class="col-lg-4">
                    <div class="text-center">
                        <div class="mb-3">
                            <div class="h3 text-danger mb-1" id="km-restantes-troca-oleo">-</div>
                            <div class="text-muted" id="texto-contador-troca-oleo">Calculando...</div>
                        </div>
                        <a href="{% url 'militares:troca_oleo_list' %}" class="btn btn-info btn-sm">
                            <i class="fas fa-list me-2"></i>Ver Todas as Trocas de Óleo
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="km-atual-troca-oleo" value="{{ proxima_troca_oleo.viatura.km_atual }}">
        <input type="hidden" id="km-proximo-troca-oleo" value="{{ proxima_troca_oleo.proximo_km_troca }}">
    </div>
    {% endif %}

    <!-- Card de Voluntário para Operações Planejadas -->
    {% if user.militar %}
    {% csrf_token %}
    <div class="content-card mb-4">
        <h5>
            <i class="fas fa-hand-holding-heart me-2"></i>
            Voluntário para Operações Planejadas
        </h5>
        <div class="row">
            <div class="col-md-8">
                <p class="mb-3">
                    <i class="fas fa-info-circle me-2 text-info"></i>
                    Marque a opção abaixo se você deseja participar como voluntário de operações planejadas.
                    Você pode alterar essa opção a qualquer momento.
                </p>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="voluntarioCheckbox" 
                           {% if user.militar.voluntario_operacoes == 'SIM' %}checked{% endif %}>
                    <label class="form-check-label" for="voluntarioCheckbox">
                        <strong>Desejo participar como voluntário de operações planejadas</strong>
                    </label>
                </div>
                <div class="mt-3">
                    <button type="button" class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#termoModal">
                        <i class="fas fa-file-contract me-2"></i>
                        Ler Termo de Ciência e Consentimento
                    </button>
                </div>
            </div>
            <div class="col-md-4">
                <div class="d-grid gap-2">
                    <button type="button" class="btn btn-success" id="salvarVoluntario" 
                            {% if user.militar.voluntario_operacoes == 'SIM' %}style="display: none;"{% endif %}>
                        <i class="fas fa-save me-2"></i>
                        Salvar como Voluntário
                    </button>
                    <button type="button" class="btn btn-warning" id="removerVoluntario" 
                            {% if user.militar.voluntario_operacoes != 'SIM' %}style="display: none;"{% endif %}>
                        <i class="fas fa-times me-2"></i>
                        Deixar de ser Voluntário
                    </button>
                </div>
            </div>
        </div>
        <div id="voluntarioMessage" class="mt-3" style="display: none;"></div>
    </div>
    {% endif %}

    <!-- Informações de Permissão do Usuário -->
    {% if is_superuser %}
    <div class="content-card mb-4">
        <div class="alert alert-success mb-0" style="font-size: 0.9em;">
            <i class="fas fa-crown me-2"></i>
            <strong>Superusuário:</strong> 
            <span class="badge bg-success">Acesso Total ao Sistema</span>
            <br>
            <small class="text-muted mt-2 d-block">
                <i class="fas fa-check text-success me-1"></i> Acesso completo a todas as funcionalidades
                <br>
                <i class="fas fa-check text-success me-1"></i> Pode gerenciar todos os dados
                <br>
                <i class="fas fa-check text-success me-1"></i> Pode acessar configurações administrativas
            </small>
        </div>
    </div>
    {% elif nivel_usuario %}
    <div class="content-card mb-4">
        <div class="alert alert-info mb-0" style="font-size: 0.9em;">
            <i class="fas fa-shield-alt me-2"></i>
            <strong>Seu Nível de Acesso:</strong> 
            {% if nivel_usuario.acesso == 'TOTAL' %}
                <span class="badge bg-success">Acesso Total - Nível {{ nivel_usuario.nivel }}</span>
            {% elif nivel_usuario.acesso == 'ORGAO' %}
                <span class="badge bg-primary">Acesso Órgão - Nível {{ nivel_usuario.nivel }}</span>
            {% elif nivel_usuario.acesso == 'GRANDE_COMANDO' %}
                <span class="badge bg-info">Acesso Grande Comando - Nível {{ nivel_usuario.nivel }}</span>
            {% elif nivel_usuario.acesso == 'UNIDADE' %}
                <span class="badge bg-warning">Acesso Unidade - Nível {{ nivel_usuario.nivel }}</span>
            {% elif nivel_usuario.acesso == 'SUBUNIDADE' %}
                <span class="badge bg-secondary">Acesso Sub-Unidade - Nível {{ nivel_usuario.nivel }}</span>
            {% else %}
                <span class="badge bg-danger">Acesso Limitado</span>
            {% endif %}
            <br>
            <small class="text-muted mt-2 d-block">
                {% if nivel_usuario.nivel >= 3 %}
                    <i class="fas fa-check text-success me-1"></i> Pode gerenciar militares
                {% endif %}
                {% if nivel_usuario.nivel >= 4 %}
                    <i class="fas fa-check text-success me-1"></i> Pode editar militares
                {% endif %}
                {% if nivel_usuario.nivel >= 5 %}
                    <i class="fas fa-check text-success me-1"></i> Pode excluir militares
                {% endif %}
            </small>
        </div>
    </div>
    {% endif %}

    <!-- Escalas de Serviço do Mês - Acordeão -->
    <div class="escalas-section">
        <div class="content-card">
            <div class="accordion" id="escalasAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="escalasHeading">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#escalasCollapse" aria-expanded="true" aria-controls="escalasCollapse">
                            <div class="d-flex align-items-center w-100">
                                <i class="fas fa-calendar-alt me-2"></i>
                                <div class="flex-grow-1">
                                    {% if is_superuser %}
                                        Escalas de Serviço - {{ mes_atual|date:"F" }} de {{ ano_atual }}
                                    {% else %}
                                        Minhas Escalas
                                    {% endif %}
                                    {% if escalas_mes_atual %}
                                    <span class="badge bg-primary ms-2">{{ escalas_mes_atual|length }}</span>
                                    {% endif %}
                                </div>
                                <div class="month-navigation me-3">
                                    <button class="btn btn-outline-secondary btn-sm me-1" onclick="navegarMes(-1)" title="Mês anterior">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <select class="month-selector me-1" id="monthSelector">
                                        <option value="1" {% if mes_atual == 1 %}selected{% endif %}>Jan</option>
                                        <option value="2" {% if mes_atual == 2 %}selected{% endif %}>Fev</option>
                                        <option value="3" {% if mes_atual == 3 %}selected{% endif %}>Mar</option>
                                        <option value="4" {% if mes_atual == 4 %}selected{% endif %}>Abr</option>
                                        <option value="5" {% if mes_atual == 5 %}selected{% endif %}>Mai</option>
                                        <option value="6" {% if mes_atual == 6 %}selected{% endif %}>Jun</option>
                                        <option value="7" {% if mes_atual == 7 %}selected{% endif %}>Jul</option>
                                        <option value="8" {% if mes_atual == 8 %}selected{% endif %}>Ago</option>
                                        <option value="9" {% if mes_atual == 9 %}selected{% endif %}>Set</option>
                                        <option value="10" {% if mes_atual == 10 %}selected{% endif %}>Out</option>
                                        <option value="11" {% if mes_atual == 11 %}selected{% endif %}>Nov</option>
                                        <option value="12" {% if mes_atual == 12 %}selected{% endif %}>Dez</option>
                                    </select>
                                    <select class="year-selector me-1" id="yearSelector">
                                        <!-- Os anos serão preenchidos dinamicamente pelo JavaScript -->
                                    </select>
                                    <button class="btn btn-outline-secondary btn-sm me-1" onclick="navegarMes(1)" title="Próximo mês">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm me-1" onclick="filtrarEscalas()">
                                        <i class="fas fa-filter me-1"></i>
                                        Filtrar
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="irParaMesAtual()" title="Ir para mês atual">
                                        <i class="fas fa-calendar-day me-1"></i>
                                        Hoje
                                    </button>
                                </div>
                            </div>
                        </button>
                    </h2>
                    <div id="escalasCollapse" class="accordion-collapse collapse show" aria-labelledby="escalasHeading" data-bs-parent="#escalasAccordion">
                        <div class="accordion-body">
                            {% if escalas_mes_atual %}
                            <div class="row">
                                {% for escala in escalas_mes_atual %}
                                <div class="col-lg-4 col-xl-3 mb-2">
                                    <div class="escala-card">
                                        <div class="escala-header">
                                            <div class="escala-data">
                                                <i class="fas fa-calendar-day me-2"></i>
                                                {{ escala.data|date:"d/m/Y" }}
                                                <div class="dia-semana">
                                                    {{ escala.data|date:"l" }}
                                                </div>
                                            </div>
                                            <span class="escala-status status-{{ escala.status }}">
                                                {% if escala.status == 'pendente' %}
                                                    <i class="fas fa-clock me-1"></i>Pendente
                                                {% elif escala.status == 'ativa' %}
                                                    <i class="fas fa-play-circle me-1"></i>Ativa
                                                {% elif escala.status == 'aprovada' %}
                                                    <i class="fas fa-check-circle me-1"></i>Aprovada
                                                {% elif escala.status == 'concluida' %}
                                                    <i class="fas fa-flag-checkered me-1"></i>Concluída
                                                {% else %}
                                                    <i class="fas fa-exclamation-triangle me-1"></i>{{ escala.get_status_display }}
                                                {% endif %}
                                            </span>
                                        </div>
                                        
                                        
                                        {% if is_superuser %}
                                            {% if escala.militares.exists %}
                                            <div class="escala-militares">
                                                <div class="militares-count">
                                                    <i class="fas fa-users me-1"></i>
                                                    {{ escala.militares.count }} militar{{ escala.militares.count|pluralize:"es" }} escalado{{ escala.militares.count|pluralize:"s" }}
                                                </div>
                                                <div class="militares-list">
                                                    {% for militar_escala in escala.militares.all|slice:":5" %}
                                                    <span class="militar-badge">
                                                        {{ militar_escala.militar.nome_guerra|default:militar_escala.militar.nome_completo|truncatechars:20 }}
                                                    </span>
                                                    {% endfor %}
                                                    {% if escala.militares.count > 5 %}
                                                    <span class="militar-badge">
                                                        +{{ escala.militares.count|add:"-5" }} mais
                                                    </span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                            {% endif %}
                                        {% else %}
                                            <!-- Mostrar informações específicas do militar logado -->
                                            {% for militar_escala in escala.militares.all %}
                                                {% if militar_escala.militar == request.user.militar %}
                                                <div class="escala-militares">
                                                    <div class="militares-count">
                                                        <i class="fas fa-user me-1"></i>
                                                    </div>
                                                    <div class="militares-list">
                                                        {% if militar_escala.tipo_servico %}
                                                        <div class="info-item">
                                                            <i class="fas fa-{% if militar_escala.tipo_servico == 'operacional' %}shield-alt{% else %}desktop{% endif %} me-2"></i>
                                                            <div>
                                                                <div class="info-label">Tipo de Serviço</div>
                                                                <div class="info-value">{{ militar_escala.get_tipo_servico_display }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if militar_escala.secao %}
                                                        <div class="info-item">
                                                            <i class="fas fa-building me-2"></i>
                                                            <div>
                                                                <div class="info-label">Seção</div>
                                                                <div class="info-value">{{ militar_escala.secao }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if militar_escala.funcao_operacional %}
                                                        <div class="info-item">
                                                            <i class="fas fa-tools me-2"></i>
                                                            <div>
                                                                <div class="info-label">Função Operacional</div>
                                                                <div class="info-value">{{ militar_escala.funcao_operacional }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if militar_escala.hora_inicio and militar_escala.hora_fim %}
                                                        <div class="info-item">
                                                            <i class="fas fa-hourglass-half me-2"></i>
                                                            <div>
                                                                <div class="info-label">Horário</div>
                                                                <div class="info-value">{{ militar_escala.hora_inicio|time:"H:i" }} - {{ militar_escala.hora_fim|time:"H:i" }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if militar_escala.turno %}
                                                        <div class="info-item">
                                                            <i class="fas fa-clock me-2"></i>
                                                            <div>
                                                                <div class="info-label">Turno</div>
                                                                <div class="info-value">{{ militar_escala.get_turno_display }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if militar_escala.equipe %}
                                                        <div class="info-item">
                                                            <i class="fas fa-users me-2"></i>
                                                            <div>
                                                                <div class="info-label">Equipe</div>
                                                                <div class="info-value">{{ militar_escala.equipe }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                        {% if militar_escala.viatura %}
                                                        <div class="info-item">
                                                            <i class="fas fa-car me-2"></i>
                                                            <div>
                                                                <div class="info-label">Viatura</div>
                                                                <div class="info-value">{{ militar_escala.viatura }}</div>
                                                            </div>
                                                        </div>
                                                        {% endif %}
                                                        
                                                    </div>
                                                    
                                                    <!-- Botão para visualizar PDF da escala -->
                                                    <div class="escala-actions mt-2">
                                                        <a href="{% url 'militares:escala_pdf' escala.pk %}" 
                                                           class="btn btn-outline-danger btn-sm w-100" 
                                                           target="_blank">
                                                            <i class="fas fa-file-pdf me-2"></i>
                                                            Escala {{ escala.data|date:"d/m" }} - PDF
                                                        </a>
                                                    </div>
                                                </div>
                                                {% endif %}
                                            {% endfor %}
                                        {% endif %}
                                        
                                        {% if escala.observacoes %}
                                        <div class="mt-2">
                                            <small class="text-muted">
                                                <i class="fas fa-sticky-note me-1"></i>
                                                {{ escala.observacoes|truncatechars:100 }}
                                            </small>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <div class="empty-state">
                                <i class="fas fa-calendar-times"></i>
                                <h6>Nenhuma escala encontrada</h6>
                                {% if is_superuser %}
                                <p class="mb-0">Não há escalas de serviço cadastradas para {{ mes_atual|date:"F" }} de {{ ano_atual }}</p>
                                {% else %}
                                <p class="mb-0">Você não possui escalas de serviço para {{ mes_atual|date:"F" }} de {{ ano_atual }}</p>
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Boletins Disponibilizados - Acordeão -->
    <div class="col-12 mb-4">
        <div class="content-card">
            <div class="accordion" id="boletinsAccordion">
                <!-- Boletins Ostensivos -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="boletinsOstensivosHeading">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#boletinsOstensivosCollapse" aria-expanded="false" aria-controls="boletinsOstensivosCollapse">
                            <div class="d-flex align-items-center w-100">
                                <i class="fas fa-file-pdf me-2"></i>
                                <div class="flex-grow-1">
                                    Boletins Ostensivos
                                    {% if boletins_disponibilizados %}
                                    <span class="badge bg-primary ms-2">{{ boletins_disponibilizados|length }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        </button>
                    </h2>
                    <div id="boletinsOstensivosCollapse" class="accordion-collapse collapse" aria-labelledby="boletinsOstensivosHeading" data-bs-parent="#boletinsAccordion">
                        <div class="accordion-body">
                            {% if boletins_disponibilizados %}
                            <div class="list-group">
                                {% for boletim in boletins_disponibilizados %}
                                <div class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">
                                            <i class="fas fa-newspaper me-2 text-primary"></i>
                                            Boletim Nº {{ boletim.numero }}
                                        </div>
                                        <div class="text-muted small mb-1">
                                            {{ boletim.titulo|truncatechars:80 }}
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <small class="text-muted me-3">
                                                <i class="fas fa-calendar me-1"></i>
                                                {{ boletim.data_disponibilizacao|date:"d/m/Y H:i" }}
                                            </small>
                                            <small class="text-muted me-3">
                                                <i class="fas fa-file-alt me-1"></i>
                                                {{ boletim.notas_incluidas.count }} notas
                                            </small>
                                            <small class="text-muted me-3">
                                                <i class="fas fa-signature me-1"></i>
                                                {{ boletim.assinaturas.count }} assinaturas
                                            </small>
                                            <span class="badge bg-success">
                                                <i class="fas fa-check-circle me-1"></i>
                                                Disponibilizado
                                            </span>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <a href="{% url 'militares:boletim_gerar_pdf' boletim.pk %}" 
                                           class="btn btn-outline-danger btn-sm me-2" 
                                           target="_blank"
                                           title="Abrir PDF">
                                            <i class="fas fa-file-pdf me-1"></i>
                                            PDF
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <div class="text-center text-muted py-4">
                                <i class="fas fa-file-pdf fa-3x mb-3"></i>
                                <h6>Nenhum boletim ostensivo disponibilizado</h6>
                                <p class="mb-0">Os boletins ostensivos aparecerão aqui quando forem disponibilizados</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                
                <!-- Boletins Reservados - Apenas para Oficiais -->
                {% if user.militar and user.militar.posto_graduacao in 'AS,AA,2T,1T,CP,MJ,TC,CB' %}
                <div class="accordion-item">
                    <h2 class="accordion-header" id="boletinsReservadosHeading">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#boletinsReservadosCollapse" aria-expanded="false" aria-controls="boletinsReservadosCollapse">
                            <div class="d-flex align-items-center w-100">
                                <i class="fas fa-lock me-2"></i>
                                <div class="flex-grow-1">
                                    Boletins Reservados
                                    {% if boletins_reservados_disponibilizados %}
                                    <span class="badge bg-warning ms-2">{{ boletins_reservados_disponibilizados|length }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        </button>
                    </h2>
                    <div id="boletinsReservadosCollapse" class="accordion-collapse collapse" aria-labelledby="boletinsReservadosHeading" data-bs-parent="#boletinsAccordion">
                        <div class="accordion-body">
                            {% if boletins_reservados_disponibilizados %}
                            <div class="list-group">
                                {% for boletim in boletins_reservados_disponibilizados %}
                                <div class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">
                                            <i class="fas fa-lock me-2 text-warning"></i>
                                            Boletim Reservado Nº {{ boletim.numero }}
                                        </div>
                                        <div class="text-muted small mb-1">
                                            {{ boletim.titulo|truncatechars:80 }}
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <small class="text-muted me-3">
                                                <i class="fas fa-calendar me-1"></i>
                                                {{ boletim.data_disponibilizacao|date:"d/m/Y H:i" }}
                                            </small>
                                            <small class="text-muted me-3">
                                                <i class="fas fa-sticky-note me-1"></i>
                                                {{ boletim.notas_incluidas_reservadas.count }} notas reservadas
                                            </small>
                                            <span class="badge bg-warning">
                                                <i class="fas fa-lock me-1"></i>
                                                Reservado
                                            </span>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <a href="{% url 'militares:boletim_reservado_gerar_pdf' boletim.pk %}" 
                                           class="btn btn-outline-danger btn-sm me-2" 
                                           target="_blank"
                                           title="Abrir PDF">
                                            <i class="fas fa-file-pdf me-1"></i>
                                            PDF
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <div class="text-center text-muted py-4">
                                <i class="fas fa-lock fa-3x mb-3"></i>
                                <h6>Nenhum boletim reservado disponibilizado</h6>
                                <p class="mb-0">Os boletins reservados aparecerão aqui quando forem disponibilizados</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- Boletins Especiais -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="boletinsEspeciaisHeading">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#boletinsEspeciaisCollapse" aria-expanded="false" aria-controls="boletinsEspeciaisCollapse">
                            <div class="d-flex align-items-center w-100">
                                <i class="fas fa-star me-2"></i>
                                <div class="flex-grow-1">
                                    Boletins Especiais
                                    {% if boletins_especiais_disponibilizados %}
                                    <span class="badge bg-info ms-2">{{ boletins_especiais_disponibilizados|length }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        </button>
                    </h2>
                    <div id="boletinsEspeciaisCollapse" class="accordion-collapse collapse" aria-labelledby="boletinsEspeciaisHeading" data-bs-parent="#boletinsAccordion">
                        <div class="accordion-body">
                            {% if boletins_especiais_disponibilizados %}
                            <div class="list-group">
                                {% for boletim in boletins_especiais_disponibilizados %}
                                <div class="list-group-item d-flex justify-content-between align-items-start">
                                    <div class="ms-2 me-auto">
                                        <div class="fw-bold">
                                            <i class="fas fa-star me-2 text-info"></i>
                                            Boletim Especial Nº {{ boletim.numero }}
                                        </div>
                                        <div class="text-muted small mb-1">
                                            {{ boletim.titulo|truncatechars:80 }}
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <small class="text-muted me-3">
                                                <i class="fas fa-calendar me-1"></i>
                                                {{ boletim.data_disponibilizacao|date:"d/m/Y H:i" }}
                                            </small>
                                            <small class="text-muted me-3">
                                                <i class="fas fa-file-alt me-1"></i>
                                                {{ boletim.notas_incluidas_especiais.count }} notas especiais
                                            </small>
                                            <span class="badge bg-info">
                                                <i class="fas fa-star me-1"></i>
                                                Especial
                                            </span>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <a href="{% url 'militares:boletim_especial_gerar_pdf' boletim.pk %}" 
                                           class="btn btn-outline-danger btn-sm me-2" 
                                           target="_blank"
                                           title="Abrir PDF">
                                            <i class="fas fa-file-pdf me-1"></i>
                                            PDF
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% else %}
                            <div class="text-center text-muted py-4">
                                <i class="fas fa-star fa-3x mb-3"></i>
                                <h6>Nenhum boletim especial disponibilizado</h6>
                                <p class="mb-0">Os boletins especiais aparecerão aqui quando forem disponibilizados</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Scripts para interatividade -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Preencher seletor de anos dinamicamente
    preencherAnos();
    
    // Animar itens da lista ao carregar
    const listItems = document.querySelectorAll('.list-group-item');
    listItems.forEach((item, index) => {
        setTimeout(() => {
            item.style.opacity = '0';
            item.style.transform = 'translateY(20px)';
            item.style.transition = 'all 0.5s ease';
            
            setTimeout(() => {
                item.style.opacity = '1';
                item.style.transform = 'translateY(0)';
            }, 100);
        }, index * 100);
    });
    
    // Animar cards de escalas ao carregar
    const escalaCards = document.querySelectorAll('.escala-card');
    escalaCards.forEach((card, index) => {
        setTimeout(() => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';
            card.style.transition = 'all 0.6s ease';
            
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
        }, index * 150);
    });
    
    // Configurar acordeões para abrir automaticamente se houver conteúdo
    const escalasAccordion = document.getElementById('escalasCollapse');
    const boletinsAccordion = document.getElementById('boletinsCollapse');
    
    // Abrir acordeão de escalas se houver escalas
    if (escalasAccordion && document.querySelectorAll('.escala-card').length > 0) {
        const escalasButton = document.getElementById('escalasHeading').querySelector('.accordion-button');
        escalasButton.classList.remove('collapsed');
        escalasAccordion.classList.add('show');
    }
    
    // Abrir acordeão de boletins se houver boletins
    if (boletinsAccordion && document.querySelectorAll('.list-group-item').length > 0) {
        const boletinsButton = document.getElementById('boletinsHeading').querySelector('.accordion-button');
        boletinsButton.classList.remove('collapsed');
        boletinsAccordion.classList.add('show');
    }
});

// Função para preencher o seletor de anos
function preencherAnos() {
    const yearSelector = document.getElementById('yearSelector');
    const anoAtual = {{ ano_atual }};
    
    // Gerar anos de 2020 até 2050 (lista infinita)
    const anos = [];
    for (let ano = 2020; ano <= 2050; ano++) {
        anos.push(ano);
    }
    
    // Limpar opções existentes
    yearSelector.innerHTML = '';
    
    // Adicionar opções
    anos.forEach(ano => {
        const option = document.createElement('option');
        option.value = ano;
        option.textContent = ano;
        if (ano === anoAtual) {
            option.selected = true;
        }
        yearSelector.appendChild(option);
    });
}

// Função para filtrar escalas por mês e ano
function filtrarEscalas() {
    const mesSelecionado = document.getElementById('monthSelector').value;
    const anoSelecionado = document.getElementById('yearSelector').value;
    
    // Redirecionar para a mesma página com o mês e ano selecionados
    const url = new URL(window.location);
    url.searchParams.set('mes', mesSelecionado);
    url.searchParams.set('ano', anoSelecionado);
    
    // Mostrar loading
    const button = event.target;
    const originalText = button.innerHTML;
    button.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>Carregando...';
    button.disabled = true;
    
    // Redirecionar após um pequeno delay para mostrar o loading
    setTimeout(() => {
        window.location.href = url.toString();
    }, 500);
}

// Função para navegação rápida entre meses
function navegarMes(direcao) {
    const mesAtual = parseInt(document.getElementById('monthSelector').value);
    const anoAtual = parseInt(document.getElementById('yearSelector').value);
    
    let novoMes = mesAtual + direcao;
    let novoAno = anoAtual;
    
    if (novoMes < 1) {
        novoMes = 12;
        novoAno = anoAtual - 1;
    } else if (novoMes > 12) {
        novoMes = 1;
        novoAno = anoAtual + 1;
    }
    
    document.getElementById('monthSelector').value = novoMes;
    document.getElementById('yearSelector').value = novoAno;
    filtrarEscalas();
}

// Função para ir para o mês atual
function irParaMesAtual() {
    const hoje = new Date();
    const mesAtual = hoje.getMonth() + 1; // JavaScript usa 0-11, então adicionamos 1
    const anoAtual = hoje.getFullYear();
    
    document.getElementById('monthSelector').value = mesAtual;
    document.getElementById('yearSelector').value = anoAtual;
    
    // Redirecionar para o mês atual
    const url = new URL(window.location);
    url.searchParams.set('mes', mesAtual);
    url.searchParams.set('ano', anoAtual);
    
    window.location.href = url.toString();
}

// JavaScript para o card de voluntário
document.addEventListener('DOMContentLoaded', function() {
    const voluntarioCheckbox = document.getElementById('voluntarioCheckbox');
    const salvarVoluntarioBtn = document.getElementById('salvarVoluntario');
    const removerVoluntarioBtn = document.getElementById('removerVoluntario');
    const voluntarioMessage = document.getElementById('voluntarioMessage');
    
    if (voluntarioCheckbox && salvarVoluntarioBtn && removerVoluntarioBtn) {
        // Mostrar/esconder botões baseado no checkbox
        voluntarioCheckbox.addEventListener('change', function() {
            if (this.checked) {
                salvarVoluntarioBtn.style.display = 'block';
                removerVoluntarioBtn.style.display = 'none';
            } else {
                salvarVoluntarioBtn.style.display = 'none';
                removerVoluntarioBtn.style.display = 'block';
            }
        });
        
        // Salvar como voluntário
        salvarVoluntarioBtn.addEventListener('click', function() {
            updateVoluntarioStatus('SIM');
        });
        
        // Remover voluntário
        removerVoluntarioBtn.addEventListener('click', function() {
            updateVoluntarioStatus('NAO');
        });
    }
    
    function updateVoluntarioStatus(status) {
        fetch('{% url "militares:update_voluntario_status" %}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            },
            body: JSON.stringify({
                'voluntario_status': status
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showMessage(data.message, 'success');
                // Atualizar interface
                if (status === 'SIM') {
                    salvarVoluntarioBtn.style.display = 'none';
                    removerVoluntarioBtn.style.display = 'block';
                    voluntarioCheckbox.checked = true;
                } else {
                    salvarVoluntarioBtn.style.display = 'block';
                    removerVoluntarioBtn.style.display = 'none';
                    voluntarioCheckbox.checked = false;
                }
            } else {
                showMessage(data.message, 'danger');
            }
        })
        .catch(error => {
            console.error('Erro:', error);
            showMessage('Erro ao atualizar status de voluntário', 'danger');
        });
    }
    
    function showMessage(message, type) {
        voluntarioMessage.innerHTML = `
            <div class="alert alert-${type} alert-dismissible fade show" role="alert">
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        `;
        voluntarioMessage.style.display = 'block';
        
        // Auto-hide após 5 segundos
        setTimeout(() => {
            voluntarioMessage.style.display = 'none';
        }, 5000);
    }
});
</script>

<!-- Modal do Termo de Ciência e Consentimento -->
<div class="modal fade" id="termoModal" tabindex="-1" aria-labelledby="termoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="termoModalLabel">
                    <i class="fas fa-file-contract me-2"></i>
                    Termo de Ciência e Consentimento – Operações Planejadas
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Importante:</strong> Leia atentamente este termo antes de aceitar participar como voluntário.
                </div>
                
                <div class="termo-content" style="line-height: 1.6; text-align: justify;">
                    <p><strong>TERMO DE CIÊNCIA E CONSENTIMENTO – OPERAÇÕES PLANEJADAS</strong></p>
                    
                    <p>Declaro que participarei de forma voluntária das operações planejadas, conforme estabelecido no Decreto nº 15.116, de 08 de março de 2013, Decreto nº 18.846, de 20 de fevereiro de 2020, Portaria nº 12.000-0026/GS/2020 (SSP/PI) e Portaria nº 243, de 24 de novembro de 2023 (CBMEPI).</p>
                    
                    <p>Estou ciente de que a adesão é voluntária, e que devo comunicar formalmente ao(s) meu(s) superior(es) hierárquico(s), com antecedência mínima de 2 (dois) dias, o desejo de não mais participar das operações planejadas.</p>
                    
                    <p>Confirmo que li e compreendi integralmente este termo, e que a marcação do aceite abaixo representa minha manifestação de vontade, com validade jurídica e administrativa.</p>
                </div>
                
                <div class="mt-4">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="aceiteTermo">
                        <label class="form-check-label" for="aceiteTermo">
                            <strong>Declaro que li, compreendi e aceito integralmente os termos acima</strong>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>
                    Fechar
                </button>
            </div>
        </div>
    </div>
</div>

<script>
// JavaScript para o modal do termo
document.addEventListener('DOMContentLoaded', function() {
    const termoModal = document.getElementById('termoModal');
    const voluntarioCheckbox = document.getElementById('voluntarioCheckbox');
    const salvarVoluntarioBtn = document.getElementById('salvarVoluntario');
    const removerVoluntarioBtn = document.getElementById('removerVoluntario');
    
    if (termoModal && voluntarioCheckbox) {
        // Quando o modal for fechado, marcar o checkbox de voluntário
        termoModal.addEventListener('hidden.bs.modal', function() {
            // Marcar o checkbox de voluntário
            voluntarioCheckbox.checked = true;
            
            // Disparar evento de change para atualizar a interface
            voluntarioCheckbox.dispatchEvent(new Event('change'));
            
            // Mostrar mensagem de sucesso
            if (document.getElementById('voluntarioMessage')) {
                showMessage('Termo lido com sucesso! Agora você pode salvar como voluntário.', 'success');
            }
        });
    }
    
    // Contador regressivo para férias
    const dataInicioFerias = document.getElementById('data-inicio-ferias');
    const statusFerias = document.getElementById('status-ferias');
    const diasRestantesEl = document.getElementById('dias-restantes');
    const textoContadorEl = document.getElementById('texto-contador');
    
    if (dataInicioFerias && diasRestantesEl && textoContadorEl) {
        function atualizarContadorFerias() {
            const dataInicio = new Date(dataInicioFerias.value + 'T00:00:00');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);
            
            const diffTime = dataInicio.getTime() - hoje.getTime();
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (statusFerias && statusFerias.value === 'GOZANDO') {
                diasRestantesEl.textContent = '🎉';
                diasRestantesEl.style.fontSize = '3.5rem';
                textoContadorEl.textContent = 'Você está de férias!';
            } else if (diffDays < 0) {
                diasRestantesEl.textContent = '0';
                textoContadorEl.textContent = 'Férias já iniciaram';
            } else if (diffDays === 0) {
                diasRestantesEl.textContent = '0';
                textoContadorEl.textContent = 'Suas férias começam hoje!';
            } else if (diffDays === 1) {
                diasRestantesEl.textContent = '1';
                textoContadorEl.textContent = 'dia restante';
            } else {
                diasRestantesEl.textContent = diffDays;
                textoContadorEl.textContent = 'dias restantes';
            }
        }
        
        // Atualizar imediatamente
        atualizarContadorFerias();
        
        // Atualizar a cada minuto
        setInterval(atualizarContadorFerias, 60000);
    }
    
    // Contador para licença especial
    const dataInicioLicencaEspecial = document.getElementById('data-inicio-licenca-especial');
    const statusLicencaEspecial = document.getElementById('status-licenca-especial');
    const diasRestantesLicencaEl = document.getElementById('dias-restantes-licenca');
    const textoContadorLicencaEl = document.getElementById('texto-contador-licenca');
    
    if (dataInicioLicencaEspecial && diasRestantesLicencaEl && textoContadorLicencaEl) {
        function atualizarContadorLicencaEspecial() {
            const dataInicio = new Date(dataInicioLicencaEspecial.value + 'T00:00:00');
            const hoje = new Date();
            hoje.setHours(0, 0, 0, 0);
            
            const diffTime = dataInicio.getTime() - hoje.getTime();
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (statusLicencaEspecial && statusLicencaEspecial.value === 'GOZANDO') {
                diasRestantesLicencaEl.textContent = '🎉';
                diasRestantesLicencaEl.style.fontSize = '3.5rem';
                textoContadorLicencaEl.textContent = 'Você está em licença especial!';
            } else if (diffDays < 0) {
                diasRestantesLicencaEl.textContent = '0';
                textoContadorLicencaEl.textContent = 'Licença já iniciou';
            } else if (diffDays === 0) {
                diasRestantesLicencaEl.textContent = '0';
                textoContadorLicencaEl.textContent = 'Sua licença começa hoje!';
            } else if (diffDays === 1) {
                diasRestantesLicencaEl.textContent = '1';
                textoContadorLicencaEl.textContent = 'dia restante';
            } else {
                diasRestantesLicencaEl.textContent = diffDays;
                textoContadorLicencaEl.textContent = 'dias restantes';
            }
        }
        
        // Atualizar imediatamente
        atualizarContadorLicencaEspecial();
        
        // Atualizar a cada minuto
        setInterval(atualizarContadorLicencaEspecial, 60000);
    }
    
    // Contador para licenciamento próximo ao vencimento
    const dataVencimentoLicenciamento = document.getElementById('data-vencimento-licenciamento');
    const diasRestantesLicenciamentoEl = document.getElementById('dias-restantes-licenciamento');
    const textoContadorLicenciamentoEl = document.getElementById('texto-contador-licenciamento');
    
    if (dataVencimentoLicenciamento && diasRestantesLicenciamentoEl && textoContadorLicenciamentoEl) {
        function atualizarContadorLicenciamento() {
            const dataVencimento = new Date(dataVencimentoLicenciamento.value + 'T00:00:00');
            const agora = new Date();
            agora.setHours(0, 0, 0, 0);
            dataVencimento.setHours(0, 0, 0, 0);
            
            const diffTime = dataVencimento - agora;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) {
                diasRestantesLicenciamentoEl.textContent = '0';
                textoContadorLicenciamentoEl.textContent = 'Licenciamento vencido!';
                textoContadorLicenciamentoEl.className = 'text-danger';
            } else if (diffDays === 0) {
                diasRestantesLicenciamentoEl.textContent = '0';
                textoContadorLicenciamentoEl.textContent = 'Vence hoje!';
                textoContadorLicenciamentoEl.className = 'text-danger fw-bold';
            } else if (diffDays === 1) {
                diasRestantesLicenciamentoEl.textContent = diffDays;
                textoContadorLicenciamentoEl.textContent = 'dia restante';
                textoContadorLicenciamentoEl.className = 'text-warning';
            } else {
                diasRestantesLicenciamentoEl.textContent = diffDays;
                textoContadorLicenciamentoEl.textContent = 'dias restantes';
                textoContadorLicenciamentoEl.className = 'text-warning';
            }
        }
        
        atualizarContadorLicenciamento();
        setInterval(atualizarContadorLicenciamento, 60000);
    }
    
    // Contador para manutenção próxima
    const kmAtualManutencao = document.getElementById('km-atual-manutencao');
    const kmProximoManutencao = document.getElementById('km-proximo-manutencao');
    const kmRestantesManutencaoEl = document.getElementById('km-restantes-manutencao');
    const textoContadorManutencaoEl = document.getElementById('texto-contador-manutencao');
    
    if (kmAtualManutencao && kmProximoManutencao && kmRestantesManutencaoEl && textoContadorManutencaoEl) {
        function atualizarContadorManutencao() {
            const kmAtual = parseInt(kmAtualManutencao.value) || 0;
            const kmProximo = parseInt(kmProximoManutencao.value) || 0;
            const diffKm = kmProximo - kmAtual;
            
            if (diffKm < 0) {
                kmRestantesManutencaoEl.textContent = '0';
                textoContadorManutencaoEl.textContent = 'KM já ultrapassado!';
                textoContadorManutencaoEl.className = 'text-danger fw-bold';
            } else if (diffKm === 0) {
                kmRestantesManutencaoEl.textContent = '0';
                textoContadorManutencaoEl.textContent = 'Atingiu o KM!';
                textoContadorManutencaoEl.className = 'text-danger fw-bold';
            } else if (diffKm <= 100) {
                kmRestantesManutencaoEl.textContent = diffKm;
                textoContadorManutencaoEl.textContent = 'km restantes';
                textoContadorManutencaoEl.className = 'text-danger';
            } else {
                kmRestantesManutencaoEl.textContent = diffKm;
                textoContadorManutencaoEl.textContent = 'km restantes';
                textoContadorManutencaoEl.className = 'text-warning';
            }
        }
        
        atualizarContadorManutencao();
        setInterval(atualizarContadorManutencao, 60000);
    }
    
    // Contador para troca de óleo próxima
    const kmAtualTrocaOleo = document.getElementById('km-atual-troca-oleo');
    const kmProximoTrocaOleo = document.getElementById('km-proximo-troca-oleo');
    const kmRestantesTrocaOleoEl = document.getElementById('km-restantes-troca-oleo');
    const textoContadorTrocaOleoEl = document.getElementById('texto-contador-troca-oleo');
    
    if (kmAtualTrocaOleo && kmProximoTrocaOleo && kmRestantesTrocaOleoEl && textoContadorTrocaOleoEl) {
        function atualizarContadorTrocaOleo() {
            const kmAtual = parseInt(kmAtualTrocaOleo.value) || 0;
            const kmProximo = parseInt(kmProximoTrocaOleo.value) || 0;
            const diffKm = kmProximo - kmAtual;
            
            if (diffKm < 0) {
                kmRestantesTrocaOleoEl.textContent = '0';
                textoContadorTrocaOleoEl.textContent = 'KM já ultrapassado!';
                textoContadorTrocaOleoEl.className = 'text-danger fw-bold';
            } else if (diffKm === 0) {
                kmRestantesTrocaOleoEl.textContent = '0';
                textoContadorTrocaOleoEl.textContent = 'Atingiu o KM!';
                textoContadorTrocaOleoEl.className = 'text-danger fw-bold';
            } else if (diffKm <= 100) {
                kmRestantesTrocaOleoEl.textContent = diffKm;
                textoContadorTrocaOleoEl.textContent = 'km restantes';
                textoContadorTrocaOleoEl.className = 'text-danger';
            } else {
                kmRestantesTrocaOleoEl.textContent = diffKm;
                textoContadorTrocaOleoEl.textContent = 'km restantes';
                textoContadorTrocaOleoEl.className = 'text-warning';
            }
        }
        
        atualizarContadorTrocaOleo();
        setInterval(atualizarContadorTrocaOleo, 60000);
    }
});
</script>
{% endblock %}
