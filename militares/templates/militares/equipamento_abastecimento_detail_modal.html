<div class="modal-header bg-primary text-white">
    <h5 class="modal-title">
        <i class="fas fa-gas-pump me-2"></i>Detalhes do Abastecimento
    </h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
    <div class="row">
        <div class="col-md-6">
            <h6 class="text-primary mb-3"><i class="fas fa-info-circle me-2"></i>Informações do Abastecimento</h6>
            <table class="table table-sm table-borderless">
                <tr>
                    <th width="40%">Equipamento:</th>
                    <td><strong>{{ abastecimento.equipamento.codigo }}</strong></td>
                </tr>
                <tr>
                    <th>Data/Hora:</th>
                    <td>{{ abastecimento.data_abastecimento|date:"d/m/Y H:i" }}</td>
                </tr>
                <tr>
                    <th>Quantidade (L):</th>
                    <td><strong>{{ abastecimento.quantidade_litros|floatformat:2 }}L</strong></td>
                </tr>
                <tr>
                    <th>Valor por Litro:</th>
                    <td>R$ {{ abastecimento.valor_litro|floatformat:2 }}</td>
                </tr>
                <tr>
                    <th>Valor Total:</th>
                    <td><strong class="text-success">R$ {{ abastecimento.valor_total|floatformat:2 }}</strong></td>
                </tr>
                <tr>
                    <th>Horas de Uso:</th>
                    <td><strong>{{ abastecimento.horas_uso_abastecimento|floatformat:2 }}h</strong></td>
                </tr>
                <tr>
                    <th>Tipo de Combustível:</th>
                    <td><span class="badge bg-info">{{ abastecimento.get_tipo_combustivel_display }}</span></td>
                </tr>
                <tr>
                    <th>Posto/Fornecedor:</th>
                    <td>{{ abastecimento.posto_fornecedor|default:"-" }}</td>
                </tr>
            </table>
        </div>
        
        <div class="col-md-6">
            <h6 class="text-primary mb-3"><i class="fas fa-user me-2"></i>Responsável e Status</h6>
            <table class="table table-sm table-borderless">
                <tr>
                    <th width="40%">Responsável:</th>
                    <td>
                        {% if abastecimento.responsavel %}
                            {{ abastecimento.responsavel.get_posto_graduacao_display }} {{ abastecimento.responsavel.nome_completo }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Ativo:</th>
                    <td>
                        {% if abastecimento.ativo %}
                            <span class="badge bg-success">Sim</span>
                        {% else %}
                            <span class="badge bg-secondary">Não</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Criado por:</th>
                    <td>{{ abastecimento.criado_por.get_full_name|default:abastecimento.criado_por.username }}</td>
                </tr>
                <tr>
                    <th>Data de Criação:</th>
                    <td>{{ abastecimento.data_criacao|date:"d/m/Y H:i" }}</td>
                </tr>
            </table>
            
            {% if abastecimento.com_aditivos %}
            <h6 class="text-primary mb-3 mt-3"><i class="fas fa-flask me-2"></i>Informações do Aditivo</h6>
            <table class="table table-sm table-borderless">
                <tr>
                    <th width="40%">Tipo de Aditivo:</th>
                    <td>{{ abastecimento.tipo_aditivo|default:"-" }}</td>
                </tr>
                <tr>
                    <th>Quantidade:</th>
                    <td>{{ abastecimento.quantidade_aditivo|default:"-" }}</td>
                </tr>
                <tr>
                    <th>Valor Unitário:</th>
                    <td>
                        {% if abastecimento.valor_unitario_aditivo %}
                            R$ {{ abastecimento.valor_unitario_aditivo|floatformat:2 }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Valor Total do Aditivo:</th>
                    <td>
                        {% if abastecimento.valor_total_aditivo %}
                            <strong>R$ {{ abastecimento.valor_total_aditivo|floatformat:2 }}</strong>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Valor Total da Nota:</th>
                    <td>
                        {% if abastecimento.valor_total_nota %}
                            <strong class="text-success">R$ {{ abastecimento.valor_total_nota|floatformat:2 }}</strong>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
            </table>
            {% endif %}
        </div>
    </div>
    
    {% if abastecimento.observacoes %}
    <div class="row mt-3">
        <div class="col-12">
            <h6 class="text-primary mb-2"><i class="fas fa-sticky-note me-2"></i>Observações</h6>
            <p class="text-muted">{{ abastecimento.observacoes }}</p>
        </div>
    </div>
    {% endif %}
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
    {% if 'EQUIPAMENTOS_OPERACIONAIS_EDITAR' in menu_permissions or user.is_superuser %}
    <button type="button" class="btn btn-primary" onclick="abrirModalEditarAbastecimento({{ abastecimento.pk }})">
        <i class="fas fa-edit me-2"></i>Editar
    </button>
    {% endif %}
</div>

